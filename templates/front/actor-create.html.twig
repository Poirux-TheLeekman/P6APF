{% extends 'base.html.twig' %}
{% form_theme formActor 'bootstrap_4_layout.html.twig' %}
{% block title %}Administration-Actor{% endblock %}
{% block stylesheets %}
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css" />

{% endblock %}
{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>
<script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"></script>

a<div class="example-wrapper">
           {% if is_granted('ROLE_USER') %}
    <h3>    Remplissez le formulaire suivant pour entrer un nouvel acteur:</h3>
        {% else %}
    <h3>    Remplissez le formulaire suivant pour sousmettre un nouvel acteur:</h3>
        {% endif %}
		
    	{{ form_start(formActor) }}
    	{{ form_row(formActor.name) }}
        {{ form_row(formActor.description) }}
        {{ form_row(formActor.mail) }}
        {{ form_row(formActor.phone) }}
        {{ form_row(formActor.fax) }}
        {{ form_row(formActor.website) }}
        {{ form_row(formActor.logo) }}
        {{ form_row(formActor.categories) }}
         <div id="map" style="height: 400px; width:600px"></div>
            
            <script>
                var map = L.map('map').setView([46.1202996, 5.2091508], 10.2);
                
                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                maxZoom: 19,
                attribution: ' <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
                }).addTo(map);


          
         		

                function onMapClick(e) {
                 	 marker = new L.marker(e.latlng, {draggable:'true'});
                	  marker.on('dragend', function(event){
                	    var marker = event.target;
                	    var position = marker.getLatLng();
                	    marker.setLatLng(new L.LatLng(position.lat, position.lng),{draggable:'true'});
                	    map.panTo(new L.LatLng(position.lat, position.lng))
                	  });
              	  	map.addLayer(marker);
              	  
                	};

                	map.on('click', onMapClick);




                
            </script>
        {% if is_granted('ROLE_USER') %}
         <button class="btn btn-success">ajouter</button>
    	{% else %}
		<button class="btn btn-success">soumettre</button>
        {% endif %}
        {{ form_end(formActor) }}
        
    	

    
    
</div>
{% endblock %}
